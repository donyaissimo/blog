# Drupal Blog

## Содержание

 * [Описание](#description)
 * [Часто задаваемые вопросы](#faq)
 * [Установка блога из исходного кода](#install-copy)

## <a name="description"></a> Описание

Данный репозиторий содержит исходный код блога построенного на Drupal 8 с использованием параграфов.

Данный блог создавался полностью под запись и является результатом работы цикла видео про [разработку блога на Drupal 8 с нуля](https://www.youtube.com/watch?v=kIjepXxLjQM&list=PLu13hPnba_XCuinhx0D3H_O6Z6yHhOtp-).

## <a name="faq"></a> Часто задаваемые вопросы

### Является ли данный код дистрибутивом?

Это **не дистрибутив**, но вы можете его использовать как дистрибутив и точку опоры.

### Это готовый к использованию блог?

Да, он завершен, но он заточен под конкретные примеры и задачи, которые были поставлены в ходе обучающих видео. Вы можете взять за основу для какого-то блога, но будьте готовы, что придется разобраться и доработать под себя. Особенно, если вы не смотрели видео.

Отвечая на впорос - нет, он **не готов к использованию** без доработки напильником. Это готовый блог в вакууме.

### <a name="future"></a> Будет ли проект развиваться дальше?

Проект **не будет развиваться**. Это результат обучающего материала. Он **может улучшаться** в будущем, в контексте того что было сделано и заложено в него. Например, обновление ядра и модулей, улучшение качества кода, фикс багов и ошибок, оптимизация, рефакторинг, но **новый функционал внедряться не будет**.

Если вам по каким-то причинам интересно развитие, лучше всего форкнуть и развивать как отдельный проект.

### У меня есть вопросы, где их задать?

Лучше всего, задавать вопросы в оригинальном [репозитории на GitLab](https://gitlab.com/Niklan/dlog). Так как этот код подкреплен девятнадцатью видео, вопросы могут появляться под видео, в общем материале в блоге автора, на других ресурсах. Лучше всего, все вопросы собирать в централизованном месте где лежит код. В первую очередь, вы поможет другим, в дальнейшем, найти ответ на похожий вопрос, а возможно, уже там и найдете ответ на свой вопрос.

### Я хочу предложить новый функционал, где и как это сделать?

Если вы это читаете, значит видео уже закончились. Ответ - никак. Новый функционал внедряться не будет, так как он может сбить с толку тех кто в дальнейшем развернет проект и не увидит овтета на свой вопрос в видео. Для более подробного объяснения лучше посмотреть ответ на вопрос [Будет ли проект развиваться дальше?](#future).

### Почему проект на GitLab, а не на GitHub?

Проекты с Drupal.org со временем [будут переведены на GitLab](https://about.gitlab.com/2018/08/16/drupal-moves-to-gitlab/), это отличный способ посмотреть как всё работает заранее (на момент записи видео, этого ещё не произошло), поучиться, подружиться. А также, в видео показано использование GitLab CI, и это круто!

### Есть ли зеркало на GitHub?

Да, у проекта есть [зеркало на GitHub](https://github.com/Niklan/dlog), но с закрытыми ишьюсами и прочим функционалом. Просто для ознакомления, если вам так проще, и учета статистики контрибуции на гитхаюе. Все пулреквесты с гитхаба будут проигнорированы.

### Какая-то странная структура у проекта, что это?

Данный сайт построен на [Composer Drupal Project](https://github.com/drupal-composer/drupal-project). По нему много информации как на русском, так и на английском языке. In a nutshell: весь проект ведется через composer.

## <a name="install-copy"></a> Установка блога из исходного кода

В данном разделе описано как развернуть точную копию проекта, но без данных. Это будте абсолютно чистый сайт на Drupal, со всем функционалом, созданным в процессе разработки.

 1. Зайдите в папку, где желаете сделать корень проекта.
 2. `git clone git@gitlab.com:Niklan/dlog.git .`

    2.1 Если вы намерены использовать проект с Docker4Drupal, то первым делом почитайте инструкцию ниже, прежде чем переходить к пункут 3.

 3. `composer install`
 4. Откройте страницу сайта где вы развернули сайт. Следуйте инструкциям по установке.
 5. На этапе **Choose profile** (выбора профиля), необходимо выбрать **Configuration installer**.
 6. Следуйте установке как обычно, никаких настроек менять не нужно.

Если вы хотите разворачивать его с использованием **Docker4Drupal**, то сделайте следующие подготовительные действия, после шага 2:

 1. Сделайте копию **docker-compose.override.example.yml** и переименуйте его в **docker-compose.override.yml**.
 2. Поправьте под свои требования. _Если это вызывает сложности, в таком случае, не создавайте файл, а правьте напрямую docker-compose.yml._
 3. Не забудьте поправить **.env** файл, для домена и названия проекта.

### После установки у меня нет иконок

Иконки подгружаются от темы. Вам необходимо установить зависимости темы.

 1. `cd web/themes/custom/blogger`
 2. `npm install` или `yarn install`

### После установки у меня нет меню

Пункты меню в Drupal являются содержимым и не переносятся с конфигурацией. Вам нужно добавить необходимые пункты в "основную навигацию" (/admin/structure/menu/manage/main).

### На главной, странице блога и прочих элементах отсутствуют картинки\видео.

Эти картинки и видео берутся из Media по захардкоженым ID. Вам, либо нужно поменять эти ID, на нужные, под которыми находятся нужные файлы, либо удалить этот код.

 * [Плагин](https://gitlab.com/Niklan/dlog/blob/master/web/modules/custom/dlog/src/Plugin/DlogHero/Path/DlogBlog.php) для страницы /blog.
 * [blogger_preprocess_page__front()](https://gitlab.com/Niklan/dlog/blob/master/web/themes/custom/blogger/includes/structure.inc#L35) отвечает за медиа на главной - изображение + видео для рагиона с поиском, фотка автора + фон для региона с автором.
 * [blogger_preprocess_page__contact()](https://gitlab.com/Niklan/dlog/blob/master/web/themes/custom/blogger/includes/structure.inc#L76) отвечает за медиа файлы на странице /contact.
 * [blogger_preprocess_page__about()](https://gitlab.com/Niklan/dlog/blob/master/web/themes/custom/blogger/includes/structure.inc#L112) отвечает за медиа файлы на странице "Об авторе".

